

<script src="https://cdnjs.cloudflare.com/ajax/libs/json2html/1.0.0/json2html.min.js"></script>
  <script>

  var departmentFilter = '{{cataegory1}}';
  var semesterFilter = '{{cataegory2}}';


var hello = '{{dataFromAnnouncement}}';
var res = hello.replace(/&quot;/g, '"');






var raw_data =  JSON.parse(res);



          var forLength = raw_data.length - 1;

      var i;
       var used = false;
       var anyNoteFromDept = false;

       var filteredData = [{
       name: 'str1',
       age:   'str2'
       }];
         for(i=0;i<=forLength;i++)
         {
         var dept = raw_data[i].cataegories;


           if(dept.includes(departmentFilter))
           {

             if(dept.includes(semesterFilter))
{

             if(!used)
             {
             filteredData.pop({
             name: 'str1',
             age:   'str2'
               });
               filteredData.push(raw_data[i]);
               used = true;
               anyNoteFromDept = true;

             }else{
               filteredData.push(raw_data[i]);
               anyNoteFromDept = true;
             }


}
           }
         }

         if(!anyNoteFromDept)
         {
           filteredData.pop({
           name: 'str1',
           age:   'str2'
             });
             filteredData.push({
             title: 'No Data for this filter Exists'
               });
         }
         var globalFilteredData = filteredData;



  var t = {'<>':"div style='width:100%;padding-top:20px;'",'html':[
                      {'<>':"form method='post' action='/detailedAnnouncement' method ='post' ",'html':[
                          {'<>':"input type='submit' value='${uniqueId}) \n Tap to Expand the content below'  style='background:#fff;color:#3f8acd;font-weight:550;' name='s3' ",'html':[
                            {'<>':"font face='Roboto'",'html':[
                        {'<>':"div style='width:100%;padding-top:20px; padding-bottom:10px; margin-right:20px; background:#ffffff;border-width:1px; border-color:rgba(130,130,130,1.00);border-style: solid; border-top:none;border-left:none;'",'children':[
                          {
                            '<>':"div style='width:100%'",'children':[
                              {
                                '<>':"table style='width:100%'",'children':[
                                  {
                                      '<>':"tr",'children':[
                                        {
                                          '<>':"td style='margin-bottom:3px; color:#3f8acd;font-size:14px; font-weight:500; padding-top:25px'",'html':"${title}"
                                        },
                                        {
                                          '<>':"td style='margin-right:25px;padding-top:6px;font-size:8px; font-weight:600; color:#848587; padding-right:15px;' align='right'",'html':"${datePublished}"
                                        }
                                      ]
                                  }
                                ]
                              }
                            ]
                          },{
                              '<>':"div style='margin-left:6px; margin-top:4px; margin-bottom:4px;  font-size:10px ; font-weight:450;'",'children':[
                                {
                                  '<>':"table style='width:100%'",'children':[
                                    {
                                        '<>':"tr",'children':[
                                          {
                                              '<>':"td style='align-content:flex-start; font-size:10px;font-weight:450;'",'html':"Entry Fees : ${title}"
                                          },
                                          {
                                              '<>':"td align='right' style='padding-right:8%;font-size:10px;font-weight:450;'",'html':"Date : ${title}"
                                          }
                                        ]
                                    }
                                  ]
                                }
                              ]
                          },{
                              '<>':"div style='margin-left:10x;margin-right:10x; font-size:12px; font-weight:450; padding-top:5px;'",'html':"${dottedString}"
                          }
                      ]}  ] }]}]}]};


  var d = filteredData;

  document.write( json2html.transform(d,t) );
</script>
